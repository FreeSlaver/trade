---
layout: page
title:  如何设计实现一个图床系统
category: program-system-design
tags: [图床,程序设计]
keywords:
description:
published:  true
---


需要考虑哪些问题了？　　

一个按钮，用户点了上传按钮，然后选照片，1照片的大小；2.照片的格式有要求；3.是否支持批量。   
（并发性要求，全球同时有成千上万个用户上传，图片被刷流量）

上来之后存到服务器上，然后要给每张图片生成一个唯一的id，图片名字，避免不会重复，返回用户图片的链接地址，最好含时间戳  
对图片本身要进行那个MD5验证，看是否已经存在，已经存在直接返回。

还要把图片分发到全球的CDN上去。图片的访问权限控制：1.只有用户可见；2.所有人可见；3.外链防盗；4.防被刷量    

图片的访问次数统计，图片的鉴定，暴力，色情，反动（图片用文字段落生成的）

难点：1.唯一id的生成，可能有亿万的数据（应该是能通过域名来负载均衡，hash）；  
2.高并发时的存储；3.CDN分发，怎么一键分发，而且达到秒级？；4.图片文件的管理，查询用户的所有图片，某个相册的图片  
这数量一大就。。。

哎，学艺不精，很多东西，仔细一想，问题挺多。   

### 唯一ID的生成
肯定不是用自增id之类的，用snowflake之类的意义也不大，因为最终都是存在一起的，












