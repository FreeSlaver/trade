---
layout: page

title: Redis面试题收录
category: redis
categoryStr: redis
tags: [redis,interview]
keywords:
description:
---

## 1. Redis一般都有哪些使用场景？
Redis本身是一个远程字典服务，完全基于内存，所以一般用作缓存。  
然后它的使用场景一般是基于使用的数据结构，比如String，1.做kv键值队的缓存；2.做计数器；
3.保存，共  享session，

List可以1.做消息队列；2.pub/sub通知服务

Hash可以1.保存数据对象，最大化使用空间结构；2.

Set可以1.做点赞列表；2.求交集并集之类的，做共同关注列表，想要关注的推荐；3.

ZSet可以做：1.排行榜；2.消息时间轮

## 2.缓存雪崩，缓存穿透，缓存击穿，都说一下？有哪些解决方案？
### 缓存雪崩
把数据想象成雪花，缓存雪崩就是内存中大量的缓存数据同时过期，导致用户数据请求全部落到数据库上，
这样一方面可能直接压垮数据库，另一方面因为数据库的高延时拖垮整个服务链路系统。

解决的办法：1.随机设置缓存过期时间；2.数据库连接池进行限制；3.流量管控；
### 缓存穿透
缓存穿透是指数据请求直接越过缓存而落到数据库上，一般是请求的数据在缓存中不存在，导致的原因是
这个数据在数据库中本身也不存在，所以不会放到缓存中。

解决的办法有：1.如果数据不存在，可以放一个空字符串到缓存中，但是因为内存空间是非常宝贵的，
而且假设有人恶意大量请求不存在的数据，这会导致实际存在有价值的缓存被挤压出去，也就是redis的缓存淘汰机制。
2.用布隆过滤器，数据库中不存在的就的确不存在，直接返回跳转命令等。
### 缓存击穿
缓存击穿是指热点数据刚好过期，而此时有大量的高并发请求来访问此热点数据，导致请求全部落到数据库上，
同样也会造成缓存雪崩的类似问题，1.数据库被压垮；2.数据库高延时拖垮整个服务链路系统。
出现这种场景的很典型的有微博的热搜，某个事件突然上了热搜，成千上万的访问同时进来。

解决的办法有：一.如果是已知的热点数据，可以用定时任务，在快过期之前将最新数据刷入；

二.如果是未知的，这种比较复杂，可以用的手段有：1.限流，但是只能针对大量新增登陆的用户请求做处理；
2.结合用户使用习惯和场景，比如某明星出轨，用户首先会搜索，这个时候可以做一个搜索统计，短时间内大量

## TODO 3. Redis内存淘汰策略 官方文档看看，写一篇
想象一下Redis可使用的内存都耗尽了，这时候继续添加缓存会怎么处理？
因为Redis并不是实时过期删除策略，而是定时轮训检测和惰性删除的方式。
所以当内存不够的时候，首先会删除哪些过期的数据直到满足空间分配需要。
如果所有已经过期的缓存都被删除，内存空间还是不够，这个时候就要针对2种数据进行淘汰。
一种是设置了过期时间的，但是还没有过期，另外一个中没有设置过期时间的，
设置了过期时间说明这种数据会更新，有一致性的问题，没有设置过期的，说明不会变动，或者会主动跟新。

其实应该从缓存的2个方面考虑：一个是缓存的价值性，比如热点数据，频繁访问的数据，这种就是价值性比较高的，
而这种删除的策略就是最近最少使用的，将哪些使用频率很小的给删除掉。
另一方面从缓存数据的实时性和准确性来看的话，就是将那种

选用那种策略，要结合系统的业务场景来看。

## 4. Redis 常见性能问题和解决方案？
这个就比较广泛了，从客户端连接，命令使用，服务端机制等方面都有可能出问题。
比较多的常见的，可能就是客户端大量超时连接，
比如命令使用：使用各种阻塞命令，比如keys等，能一起一次性执行的命令却分开执行
服务端常见的有主从同步，持久化问题，访问延时高等问题。妈个比布具体问，鬼tm知道。

## TODO 5.Redis哨兵 看文档弄清楚


