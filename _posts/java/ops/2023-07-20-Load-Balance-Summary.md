---
layout: page
title: 负载均衡总结
category: ops
tags: [负载均衡,总结]
keywords:
description:
---

还是5W1H上手
## 负载均衡是什么？
负载均衡，Load Balance，简单来说就是如何在多台服务器之间分配负载压力。  
维基百科的解释是：负载平衡（英语：load balancing）是一种电子计算机技术，用来在多个计算机（计算机集群）、网络连接、CPU、磁碟驱动器或其他资源中 分配负载，  

维基的描述**负载均衡就是一种资源的分配策略。**
## 负载均衡的作用和目的
1.使用负载均衡以达到最佳化资源使用、最大化吞吐率、最小化响应时间、
2.避免过载的。
3.避免单一的组件造成的单点故障，可以通过冗余提高可靠性。
4.用于解决互联网架构中的高并发和高可用的问题。
5.隐藏了内网拓扑结构
6.提高容错能力

## 负载均衡使用场景
负载平衡主要应用于Web网站，大型的Internet Relay Chat网络，高流量的文件下载网站，NNTP（Network News Transfer Protocol）服务  
和DNS服务。现在负载平衡器也开始支持数据库服务，称之为数据库负载平衡器。
## 负载均衡怎么实现？
负载均衡器通常是一个软件程序，这个程序侦听一个外部端口，互联网用户可以通过这个端口来访问服务，
而作为负载平衡器的软件会将用户的请求转发给后台内网伺服器，内网伺服器将请求的响应返回给负载均衡器，负载均衡器再将响应发送到用户， 


### DNS轮循
以熟悉的Web服务为例，用户浏览器输入域名，然后域名解析得到实际ip地址，所以这里**可以通过DNS来实现负载均衡**，  
DNS的玩法有很多，可以将请求分配到不同的服务器ip地址上，也能通过将不同的线路，境内境外的请求分配到不同线路的服务器上，  
DNS负载均衡的缺点是什么？
1.不够精细化；2.本来我们的目标是通过服务器当前的负载压力，然后将一部分压力转移到另外的机器上，  
而如果通过DNS不同线路来做的话，我们必须得提前获知此条线路大概会有多少访问量，这明显不现实

另外像CloudFlare这种服务商，在DNS解析得到ip之前，它能直接提供缓存页面，这个也算是一种广义上的负载均衡，  
其实负载均衡最终的目的就是为了提升整体服务负载的上限。
### Scheduling算法
负载均衡器有各种各样的工作排程演算法（用于决定将前端用户请求发送到哪一个后台服务器），最简单的是随机选择和轮询。  
更为高级的负载均衡器会考虑其它更多的相关因素，如**后台服务器的负载，响应时间，运行状态，活动连接数，地理位置，处理能力，或最近分配的流量。**

## 负载均衡的架构
高性能系统通常会使用多层负载均衡。另外专用的硬件负载均衡器以及纯软件负载均衡器，包括开源的，例如Apache Web服务器的mod proxy balancer扩展，nginx，Varnish和Pound反向代理和负载均衡器。

对于一个多层次架构体系，在负载均衡器或网络分发器后面有两种设计，术语称之为Bowties和Stovepipes。    
Stovepipe设计中，事务是从顶部分发的，然后从一个固定通道通过一系列硬件和软件设备，到达最终目的地。  
Bowties设计，在每一层中事务处理有多条路径可供选择。在事务处理的网络结构中可能会是Stovepipes，也可以是Bowties，或者根据每一层的实际需求采用混合构架。

## 负载均衡如何实现？

## 负载均衡算法有哪些？

